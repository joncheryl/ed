/*
John Sherrill
Dec 25, 2024

Please stop working on Christmas.

Schema for nonfiscal, district level CCD data. Includes 4 tables:
- membership
- staff
- directory (could be retitled 'lea')
- state (basically directory for state)

I guess you should df.to_sql() the dataframe info into each table. There
is a dtype parameter that should be used with each column either INTEGER, REAL,
or TEXT.
*/

-- State information
CREATE TABLE state (
    fipst INTEGER PRIMARY KEY,
    st TEXT,
    statename TEXT
);

-- LEA information
CREATE TABLE directory (
    end_year INTEGER,
    fipst INTEGER,
    lea_name TEXT,
    state_agency_no INTEGER,
    union_code TEXT,
    st_leaid TEXT,
    leaid INTEGER,
    mstreet1 TEXT,
    mstreet2 TEXT,
    mstreet3 TEXT,
    mcity TEXT,
    mstate TEXT,
    mzip TEXT,
    mzip4 TEXT,
    lstreet1 TEXT,
    lstreet2 TEXT,
    lstreet3 TEXT,
    lcity TEXT,
    lstate TEXT,
    lzip TEXT,
    lzip4 TEXT,
    phone TEXT,
    website TEXT,
    sy_status INTEGER,
    sy_status_TEXT TEXT,
    updated_status INTEGER,
    updated_status_TEXT TEXT,
    effective_date TEXT,
    lea_type INTEGER,
    lea_type_TEXT TEXT,
    out_of_state_flag INTEGER,
    charter_lea TEXT,
    charter_lea_TEXT TEXT,
    nogrades INTEGER,
    g_pk_offered INTEGER,
    g_kg_offered INTEGER,
    g_1_offered INTEGER,
    g_2_offered INTEGER,
    g_3_offered INTEGER,
    g_4_offered INTEGER,
    g_5_offered INTEGER,
    g_6_offered INTEGER,
    g_7_offered INTEGER,
    g_8_offered INTEGER,
    g_9_offered INTEGER,
    g_10_offered INTEGER,
    g_11_offered INTEGER,
    g_12_offered INTEGER,
    g_13_offered INTEGER,
    g_ug_offered INTEGER,
    g_ae_offered INTEGER,
    gslo TEXT,
    gshi TEXT,
    school_level TEXT,
    igoffered TEXT,
    operational_schools INTEGER,
    biea INTEGER,
    agchrt TEXT
);

-- Staffing information
CREATE TABLE staff (
    end_year INTEGER,
    fipst INTEGER,
    lea_name TEXT,
    state_agency_no INTEGER,
    union_code TEXT,
    st_leaid TEXT,
    leaid INTEGER,
    corsup REAL,
    elmgui REAL,
    elmtch REAL,
    gui REAL,
    kgtch REAL,
    leaadm REAL,
    leasta REAL,
    leasup REAL,
    libspe REAL,
    libsup REAL,
    othsta REAL,
    othsup REAL,
    para REAL,
    pktch REAL,
    schadm REAL,
    schpsych REAL,
    schsta REAL,
    schsup REAL,
    secgui REAL,
    sectch REAL,
    stusupwopsych REAL,
    total REAL,
    totgui REAL,
    tottch REAL,
    ugtch REAL,
    stusup REAL
);

-- Student enrollment information
CREATE TABLE membership (
    id INTEGER PRIMARY KEY,
    end_year INTEGER,
    leaid INTEGER,
    student_count INTEGER,
    race_ethnicity TEXT,
    grade TEXT,
    sex TEXT,
    total_indicator TEXT,
    dms_flag TEXT
);

-- Fiscal information
CREATE TABLE fiscal (
    id INTEGER PRIMARY KEY,
    leaid INTEGER,
    censusid TEXT,
    fl_v33 TEXT,
    fl_c14 TEXT,
    fl_c15 TEXT,
    fl_c16 TEXT,
    fl_c17 TEXT,
    fl_c18 TEXT,
    fl_c19 TEXT,
    fl_c20 TEXT,
    fl_c25 TEXT,
    fl_c36 TEXT,
    fl_b10 TEXT,
    fl_b11 TEXT,
    fl_b12 TEXT,
    fl_b13 TEXT,
    fl_c01 TEXT,
    fl_c04 TEXT,
    fl_c05 TEXT,
    fl_c06 TEXT,
    fl_c07 TEXT,
    fl_c08 TEXT,
    fl_c09 TEXT,
    fl_c10 TEXT,
    fl_c11 TEXT,
    fl_c12 TEXT,
    fl_c13 TEXT,
    fl_c35 TEXT,
    fl_c38 TEXT,
    fl_c39 TEXT,
    fl_t02 TEXT,
    fl_t06 TEXT,
    fl_t09 TEXT,
    fl_t15 TEXT,
    fl_t40 TEXT,
    fl_t99 TEXT,
    fl_d11 TEXT,
    fl_d23 TEXT,
    fl_a07 TEXT,
    fl_a08 TEXT,
    fl_a09 TEXT,
    fl_a11 TEXT,
    fl_a13 TEXT,
    fl_a15 TEXT,
    fl_a20 TEXT,
    fl_u22 TEXT,
    fl_u97 TEXT,
    fl_c24 TEXT,
    fl_e13 TEXT,
    fl_v91 TEXT,
    fl_v92 TEXT,
    fl_e17 TEXT,
    fl_e07 TEXT,
    fl_e08 TEXT,
    fl_e09 TEXT,
    fl_v40 TEXT,
    fl_v45 TEXT,
    fl_v90 TEXT,
    fl_v85 TEXT,
    fl_e11 TEXT,
    fl_v60 TEXT,
    fl_v65 TEXT,
    fl_v70 TEXT,
    fl_v75 TEXT,
    fl_v80 TEXT,
    fl_f12 TEXT,
    fl_g15 TEXT,
    fl_k09 TEXT,
    fl_k10 TEXT,
    fl_k11 TEXT,
    fl_l12 TEXT,
    fl_m12 TEXT,
    fl_q11 TEXT,
    fl_i86 TEXT,
    fl_z32 TEXT,
    fl_z33 TEXT,
    fl_v11 TEXT,
    fl_v13 TEXT,
    fl_v15 TEXT,
    fl_v17 TEXT,
    fl_v21 TEXT,
    fl_v23 TEXT,
    fl_v37 TEXT,
    fl_v29 TEXT,
    fl_z34 TEXT,
    fl_v10 TEXT,
    fl_v12 TEXT,
    fl_v14 TEXT,
    fl_v16 TEXT,
    fl_v18 TEXT,
    fl_v22 TEXT,
    fl_v24 TEXT,
    fl_v38 TEXT,
    fl_v30 TEXT,
    fl_v32 TEXT,
    fl_19h TEXT,
    fl_21f TEXT,
    fl_31f TEXT,
    fl_41f TEXT,
    fl_61v TEXT,
    fl_66v TEXT,
    fl_w01 TEXT,
    fl_w31 TEXT,
    fl_w61 TEXT,
    fl_z35 TEXT,
    fl_z36 TEXT,
    fl_z37 TEXT,
    fl_z38 TEXT,
    fl_v93 TEXT,
    fl_a40 TEXT,
    fl_u11 TEXT,
    fl_u30 TEXT,
    fl_u50 TEXT,
    fl_hr1 TEXT,
    fl_he1 TEXT,
    fl_he2 TEXT,
    fl_membersch TEXT,
    fl_v95 TEXT,
    fl_v02 TEXT,
    fl_k14 TEXT,
    fl_ce1 TEXT,
    fl_ce2 TEXT,
    fl_ce3 TEXT,
    fl_c22 TEXT,
    fl_c23 TEXT,
    fl_c26 TEXT,
    fl_c27 TEXT,
    fl_b14 TEXT,
    fl_se1 TEXT,
    fl_se2 TEXT,
    fl_se3 TEXT,
    fl_se4 TEXT,
    fl_se5 TEXT,
    fl_ar1 TEXT,
    fl_ar2 TEXT,
    fl_ar3 TEXT,
    fl_ar4 TEXT,
    fl_ar5 TEXT,
    fl_ar6 TEXT,
    fl_ae1 TEXT,
    fl_ae2 TEXT,
    fl_ae3 TEXT,
    fl_ae4 TEXT,
    fl_ae5 TEXT,
    fl_ae6 TEXT,
    fl_ar1a TEXT,
    fl_ar1b TEXT,
    fl_ar2a TEXT,
    fl_ar6a TEXT,
    fl_ae7 TEXT,
    fl_ae8 TEXT,
    fl_ae1a TEXT,
    fl_ae1b TEXT,
    fl_ae1c TEXT,
    fl_ae1d TEXT,
    fl_ae1e TEXT,
    fl_ae1f TEXT,
    fl_ae1g TEXT,
    fl_ae2a TEXT,
    fl_ae2b TEXT,
    fl_ae2c TEXT,
    fl_ae2d TEXT,
    fl_ae2e TEXT,
    fl_ae2f TEXT,
    fl_ae2g TEXT,
    fl_ae4a TEXT,
    fl_ae4b TEXT,
    fl_ae4c TEXT,
    fl_ae4d TEXT,
    fl_ae4e TEXT,
    fl_ae4f TEXT,
    fl_ae4g TEXT,
    district_name TEXT,
    csa TEXT,
    cbsa TEXT,
    pid6 TEXT,
    unit_type TEXT,
    end_year INTEGER,
    fipst INTEGER,
    v33 INTEGER,
    totalrev INTEGER,
    tfedrev INTEGER,
    c25 INTEGER,
    c26 INTEGER,
    b26 INTEGER,
    tstrev INTEGER,
    c23 INTEGER,
    c27 INTEGER,
    tlocrev INTEGER,
    t02 INTEGER,
    t06 INTEGER,
    t09 INTEGER,
    t15 INTEGER,
    t40 INTEGER,
    t99 INTEGER,
    d11 INTEGER,
    d23 INTEGER,
    a09 INTEGER,
    a10 INTEGER,
    u22 INTEGER,
    u97 INTEGER,
    a12 INTEGER,
    c24 INTEGER,
    totalexp INTEGER,
    tcurinst INTEGER,
    e13 INTEGER,
    tcurssvc INTEGER,
    e17 INTEGER,
    e07 INTEGER,
    e08 INTEGER,
    e09 INTEGER,
    e15 INTEGER,
    e27 INTEGER,
    tcuroth INTEGER,
    e11 INTEGER,
    e10a INTEGER,
    tnonelse INTEGER,
    j10 INTEGER,
    j11 INTEGER,
    e10b INTEGER,
    j12 INTEGER,
    j13 INTEGER,
    j15 INTEGER,
    tcapout INTEGER,
    f12 INTEGER,
    k12 INTEGER,
    g15 INTEGER,
    tcurelsc INTEGER,
    l12 INTEGER,
    m12 INTEGER,
    q11 INTEGER,
    i86 INTEGER,
    z32 INTEGER,
    z33 INTEGER,
    _19h INTEGER,
    _21f INTEGER,
    _31f INTEGER,
    _41f INTEGER,
    _61v INTEGER,
    _66v INTEGER,
    w01 INTEGER,
    w31 INTEGER,
    w61 INTEGER,
    district_weight INTEGER,
    ccdnf INTEGER,
    c14 INTEGER,
    c15 INTEGER,
    c16 INTEGER,
    c17 INTEGER,
    c18 INTEGER,
    c19 INTEGER,
    c20 INTEGER,
    c36 INTEGER,
    b10 INTEGER,
    b11 INTEGER,
    b12 INTEGER,
    b13 INTEGER,
    c01 INTEGER,
    c05 INTEGER,
    c12 INTEGER,
    c04 INTEGER,
    c06 INTEGER,
    c09 INTEGER,
    c11 INTEGER,
    c07 INTEGER,
    c08 INTEGER,
    c10 INTEGER,
    c13 INTEGER,
    c38 INTEGER,
    c39 INTEGER,
    c35 INTEGER,
    a07 INTEGER,
    a08 INTEGER,
    a11 INTEGER,
    a13 INTEGER,
    a20 INTEGER,
    a15 INTEGER,
    v35 INTEGER,
    v40 INTEGER,
    v45 INTEGER,
    v50 INTEGER,
    v55 INTEGER,
    v85 INTEGER,
    v60 INTEGER,
    v65 INTEGER,
    v70 INTEGER,
    v75 INTEGER,
    v80 INTEGER,
    k09 INTEGER,
    k10 INTEGER,
    k11 INTEGER,
    v11 INTEGER,
    v13 INTEGER,
    v15 INTEGER,
    v17 INTEGER,
    v19 INTEGER,
    v21 INTEGER,
    v23 INTEGER,
    v25 INTEGER,
    v27 INTEGER,
    v29 INTEGER,
    z34 INTEGER,
    v10 INTEGER,
    v30 INTEGER,
    v32 INTEGER,
    fipsco INTEGER,
    v91 INTEGER,
    v92 INTEGER,
    v90 INTEGER,
    v37 INTEGER,
    v38 INTEGER,
    cenfile INTEGER,
    z35 INTEGER,
    z36 INTEGER,
    z37 INTEGER,
    z38 INTEGER,
    v93 INTEGER,
    a40 INTEGER,
    u11 INTEGER,
    u30 INTEGER,
    u50 INTEGER,
    hr1 INTEGER,
    he1 INTEGER,
    he2 INTEGER,
    membersch INTEGER,
    v95 INTEGER,
    v02 INTEGER,
    k14 INTEGER,
    ce1 INTEGER,
    ce2 INTEGER,
    ce3 INTEGER,
    c22 INTEGER,
    b14 INTEGER,
    se1 INTEGER,
    se2 INTEGER,
    se3 INTEGER,
    se4 INTEGER,
    se5 INTEGER,
    ar1 INTEGER,
    ar2 INTEGER,
    ar3 INTEGER,
    ar4 INTEGER,
    ar5 INTEGER,
    ar6 INTEGER,
    ae1 INTEGER,
    ae2 INTEGER,
    ae3 INTEGER,
    ae4 INTEGER,
    ae5 INTEGER,
    ae6 INTEGER,
    ar1a INTEGER,
    ar1b INTEGER,
    ar2a INTEGER,
    ar6a INTEGER,
    ae7 INTEGER,
    ae8 INTEGER,
    ae1a INTEGER,
    ae1b INTEGER,
    ae1c INTEGER,
    ae1d INTEGER,
    ae1e INTEGER,
    ae1f INTEGER,
    ae1g INTEGER,
    ae2a INTEGER,
    ae2b INTEGER,
    ae2c INTEGER,
    ae2d INTEGER,
    ae2e INTEGER,
    ae2f INTEGER,
    ae2g INTEGER,
    ae4a INTEGER,
    ae4b INTEGER,
    ae4c INTEGER,
    ae4d INTEGER,
    ae4e INTEGER,
    ae4f INTEGER,
    ae4g INTEGER,
    v12 REAL,
    v14 REAL,
    v16 REAL,
    v18 REAL,
    v20 REAL,
    v22 REAL,
    v24 REAL,
    v26 REAL,
    v28 REAL
);

-- Indexes to speed up common queries
CREATE INDEX idx_membership_end_year_leaid ON membership (end_year, leaid);
CREATE INDEX idx_fiscal_end_year_leaid ON fiscal (end_year, leaid);
CREATE INDEX idx_membership_total_indicator ON membership (total_indicator);
